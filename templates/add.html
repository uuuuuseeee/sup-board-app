<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>新しいボードの追加</title>
</head>
<body>
    <h1>新しいボードを追加</h1>
    <form action="/add" method="POST">
        <p>
            ボード名: <input type="text" name="name" required>
        </p>
        <p>
            場所: 
            <select name="location_select" id="location_select" onchange="toggleLocationInput()">
                <option value="横浜">横浜</option>
                <option value="海の公園">海の公園</option>
                <option value="平塚">平塚</option>
                <option value="日本橋">日本橋</option>
                <option value="その他">その他</option>
            </select>
        </p>
        
        <p id="location_other_p" style="display: none;">
            具体的な場所: <input type="text" name="location_other">
        </p>

        <p>
            更新者: <input type="text" name="updater" required>
        </p>

        <p style="display: none;">
            持ち主: <input type="text" name="owner">
        </p>

        <p>
            備考: <br>
            <textarea name="notes" rows="4" cols="50"></textarea>
        </p>
        <button type="submit">追加する</button>
    </form>
    <br>
    <a href="/">一覧に戻る</a>

    <script>
        function toggleLocationInput() {
            const select = document.getElementById('location_select');
            const otherLocationP = document.getElementById('location_other_p');
            const updaterInput = document.querySelector('input[name="updater"]');
            const ownerInput = document.querySelector('input[name="owner"]');
            const isOther = select.value === 'その他';

            otherLocationP.style.display = isOther ? 'block' : 'none';
            ownerInput.parentElement.style.display = isOther ? 'block' : 'none';
            updaterInput.parentElement.style.display = isOther ? 'none' : 'block';

            // 入力欄の有効/無効と必須属性を切り替える
            ownerInput.disabled = !isOther;
            ownerInput.required = isOther;

            updaterInput.disabled = isOther;
            updaterInput.required = !isOther;
        }
        // ページ読み込み時にも一度実行して初期状態を整える
        toggleLocationInput();
    </script>
</body>
</html>
